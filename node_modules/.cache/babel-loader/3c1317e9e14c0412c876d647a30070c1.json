{"ast":null,"code":"import _defineProperty from\"/Users/musta88/Development/code/Module4/property-managment/front-end-property-managment/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/musta88/Development/code/Module4/property-managment/front-end-property-managment/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/musta88/Development/code/Module4/property-managment/front-end-property-managment/node_modules/@babel/runtime/helpers/esm/createClass\";import _createSuper from\"/Users/musta88/Development/code/Module4/property-managment/front-end-property-managment/node_modules/@babel/runtime/helpers/esm/createSuper\";import _inherits from\"/Users/musta88/Development/code/Module4/property-managment/front-end-property-managment/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import axios from'axios';import{Link}from'react-router-dom';var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(props){var _this;_classCallCheck(this,Login);_this=_super.call(this,props);_this.handleChange=function(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;_this.setState(_defineProperty({},name,value));};_this.handleSubmit=function(event){event.preventDefault();var _this$state=_this.state,first_name=_this$state.first_name,last_name=_this$state.last_name,email=_this$state.email,password=_this$state.password;var landlord={first_name:first_name,last_name:last_name,email:email,password:password};axios.post('http://localhost:3001/login',{landlord:landlord},{withCredentials:true}).then(function(response){if(response.data.logged_in){_this.props.handleLogin(response.data);_this.redirect();}else{_this.setState({errors:response.data.errors});}}).catch(function(error){return console.log('api errors:',error);});};_this.redirect=function(){_this.props.history.push('/');};_this.handleErrors=function(){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"ul\",null,_this.state.errors.map(function(error){return/*#__PURE__*/React.createElement(\"li\",{key:error},error);})));};_this.state={first_name:'',last_name:'',email:'',password:'',errors:''};return _this;}_createClass(Login,[{key:\"componentWillMount\",value:function componentWillMount(){return this.props.loggedInStatus?this.redirect():null;}},{key:\"render\",value:function render(){var _this$state2=this.state,first_name=_this$state2.first_name,last_name=_this$state2.last_name,email=_this$state2.email,password=_this$state2.password,errors=_this$state2.errors;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h1\",null,\"Log In\"),/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleSubmit},/*#__PURE__*/React.createElement(\"input\",{placeholder:\"first name\",type:\"text\",name:\"first_name\",value:first_name,onChange:this.handleChange}),/*#__PURE__*/React.createElement(\"input\",{placeholder:\"last name\",type:\"text\",name:\"last_name\",value:last_name,onChange:this.handleChange}),/*#__PURE__*/React.createElement(\"input\",{placeholder:\"email\",type:\"text\",name:\"email\",value:email,onChange:this.handleChange}),/*#__PURE__*/React.createElement(\"input\",{placeholder:\"password\",type:\"password\",name:\"password\",value:password,onChange:this.handleChange}),/*#__PURE__*/React.createElement(\"button\",{placeholder:\"submit\",type:\"submit\"},\"Log In\"),/*#__PURE__*/React.createElement(\"div\",null,\"or \",/*#__PURE__*/React.createElement(Link,{to:\"/signup\"},\"Sign up\"))),/*#__PURE__*/React.createElement(\"div\",null,errors?this.handleErrors():null));}}]);return Login;}(Component);export{Login as default};","map":{"version":3,"sources":["/Users/musta88/Development/code/Module4/property-managment/front-end-property-managment/src/components/registrations/Login.js"],"names":["React","Component","axios","Link","Login","props","handleChange","event","target","name","value","setState","handleSubmit","preventDefault","state","first_name","last_name","email","password","landlord","post","withCredentials","then","response","data","logged_in","handleLogin","redirect","errors","catch","error","console","log","history","push","handleErrors","map","loggedInStatus"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport axios from 'axios'\nimport {Link} from 'react-router-dom'\n\nexport default class Login extends Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      first_name:'',\n      last_name: '',\n      email: '',\n      password: '',\n      errors: ''\n    };\n  }\n\nhandleChange = (event) => {\n  const {name, value} = event.target\n  this.setState({\n    [name]: value\n  })\n};\n\nhandleSubmit = (event) =>{\n  event.preventDefault()\n  const {first_name, last_name, email, password} = this.state\n\n  const landlord = {\n    first_name: first_name,\n    last_name: last_name,\n    email: email,\n    password: password\n  }\n   \n  axios.post('http://localhost:3001/login', {landlord}, {withCredentials: true})\n  .then(response => {\n    if (response.data.logged_in){\n   \n      this.props.handleLogin(response.data)\n      this.redirect()\n    }else{\n      this.setState({\n        errors: response.data.errors\n      })\n    }\n  })\n \n  .catch(error => console.log('api errors:', error))\n  };\n\n\nredirect = () =>{\n  this.props.history.push('/')\n}\n\nhandleErrors = () =>{\n  return(\n    <div>\n      <ul>\n        {this.state.errors.map(error => {\n          return <li key={error}>{error}</li>\n        })}\n      </ul>\n    </div>\n  )\n}\n\ncomponentWillMount(){\n  return this.props.loggedInStatus ? this.redirect() : null\n}\n\n\n  render() {\n    const {first_name, last_name, email, password, errors} = this.state\n    return (\n      <div>\n        <h1>Log In</h1>\n        <form onSubmit={this.handleSubmit}>\n        <input\n        placeholder=\"first name\"\n        type=\"text\"\n        name=\"first_name\"\n        value={first_name}\n        onChange={this.handleChange}\n        />\n        <input\n        placeholder=\"last name\"\n        type=\"text\"\n        name=\"last_name\"\n        value={last_name}\n        onChange={this.handleChange}\n        />\n        <input\n          placeholder=\"email\"\n          type=\"text\"\n          name=\"email\"\n          value={email}\n          onChange={this.handleChange}\n        />\n        <input\n               placeholder=\"password\"\n               type=\"password\"\n               name=\"password\"\n               value={password}\n               onChange={this.handleChange}\n        />\n        <button placeholder=\"submit\" type=\"submit\">\n          Log In\n        </button>\n        <div>\n          or <Link to='/signup'>Sign up</Link>\n        </div>\n        </form>\n        <div>\n          {errors? this.handleErrors(): null}\n        </div>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}